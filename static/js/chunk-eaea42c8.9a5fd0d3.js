(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-eaea42c8"],{"5a1d":function(t,e,i){"use strict";i.r(e);var o=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("div",{attrs:{id:"zone_joystick"}}),i("el-row",[i("el-button",{on:{click:t.clickTestBtn}},[t._v("默认按钮")]),i("el-button",{attrs:{icon:"el-icon-position",type:"primary",circle:""}}),i("el-button",{attrs:{type:"success",circle:""}},[t._v("返")]),i("el-button",{class:{plain:!t.autoRotationStatus},attrs:{type:"info",circle:""},on:{click:t.autoRotation}},[t._v("旋转抓拍")]),i("el-button",{attrs:{icon:"el-icon-microphone",type:"warning",circle:""}}),i("el-button",{attrs:{type:"danger",circle:""}},[t._v("回 充")])],1),i("el-row",[i("el-button",{on:{click:t.clickdelMapBtn}},[t._v("朴素按钮")]),i("el-button",{class:{plain:!t.headLightStatus},attrs:{icon:"el-icon-sunrise",type:"primary",circle:""},on:{click:t.clickHeadLightBtn}}),i("el-button",{class:{plain:!t.flashLightStatus},attrs:{type:"success",circle:""},on:{click:t.clickFlashLightBtn}},[t._v("闪")]),i("el-button",{attrs:{type:"info",plain:""},on:{click:t.clickStronVoice}},[t._v("强声驱散")]),i("el-button",{attrs:{type:"warning",plain:""},on:{click:t.getMusicList}},[t._v("获取音频列表")]),i("el-button",{attrs:{type:"danger",loading:t.emergencyStopStatus},on:{click:t.clickEmergencyStop}},[t._v("紧急制动")])],1),i("h1",[t._v(t._s(t.$store.state.itemNum))])],1)},n=[],s=(i("bc3a"),i("e477")),r=i("267e"),a=(i("7ed4"),i("3786"),i("caaf")),c=i.n(a),d={name:"robot",created(){console.log("created")},activated(){console.log("activated")},deactivated(){console.log("deactivated")},mounted(){console.log("mounted"),this.$socket.open(),this.$socket.emit("connect",1),this.sockets.subscribe("notice",(function(t){console.log("recv sub:",t),this.$socket.emit("chat","how are you")}));const t={zone:document.getElementById("zone_joystick"),mode:"semi",size:100,color:"transparent",threshold:.5,restOpacity:.5,position:{left:"50%",top:"50%"}};var e=c.a.create(t);e.on("added",(function(t,e){const i={x:e.position.x,y:e.position.y};e.on("move",(function(t,e){console.log("x:",e.position.x-i.x," y:",e.position.y-i.y," distance:",e.distance," angle:",e.angle.degree);const o={id:r["b"],status:"on",direction:"left",step:Math.round(e.distance/50*8)};0!=o.step&&(e.angle.degree<45||e.angle.degree>315?o.direction="right":e.angle.degree>=45&&e.angle.degree<135?o.direction="up":e.angle.degree>=135&&e.angle.degree<225?o.direction="left":o.direction="down",Object(s["ptzMove"])(o))})),console.log("orgin:",e.position)})).on("removed",(function(t,e){e.off("start move end dir plain")})).on("end",(function(t,e){console.log("end");const i={id:r["b"],status:"off",direction:"left",step:1};Object(s["ptzMove"])(i)}))},components:{},computed:{role(){return"admin"===this.name?"超级管理员":"普通用户"}},sockets:{connect:function(){console.log("socket connected:",this.$socket.id)},sentToClient:function(t){console.log('this method was fired by the socket server. eg: io.emit("sentToClient", data)'),console.log(t)},disconnect(){console.log("断开链接")},reconnect(){console.log("重新链接")},connect_error(){console.log("conn error")},sub(t){console.log("recv sub:",t)},message(t){this.$notify({title:"新消息",message:t,type:"warning",duration:1e4}),console.log("data",t)}},data(){return{emergencyStopStatus:!1,flashLightStatus:!1,headLightStatus:!1,autoRotationStatus:!1,sockid:""}},methods:{clickTestBtn(){const t={Ip:"10.20.20.156",Channel:1,Subtype:0};this.$http.post("http://10.20.20.140:3000/stream/playDahua",t).then(t=>{var e=t.data.data.path,i=document.getElementById("video-canvas");console.log("url:",e);new JSMpeg.Player(e,{canvas:i})})},clickHeadLightBtn(){const t={id:r["b"],status:this.headLightStatus?"off":"on"};Object(s["switchHeadLight"])(t).then(t=>{this.headLightStatus=!this.headLightStatus})},clickFlashLightBtn(){const t={id:r["b"],status:this.flashLightStatus?"off":"on"};Object(s["switchFlashLight"])(t).then(t=>{this.flashLightStatus=!this.flashLightStatus})},getTicket(){this.$http.get("/robot/"+r["b"]+"/ticket").then(t=>{console.log(t.data)})},clickdelMapBtn(){const t={id:r["b"],maps:["atris1","atris2"]};Object(s["deleteMaps"])(t).then(t=>{})},clickEmergencyStop(){console.log("click emergency stop"),this.emergencyStopStatus=!0,setTimeout(()=>{this.emergencyStopStatus=!1,this.isplain=!this.isplain},200),this.$socket.emit("sendToServer",{a:1,b:!0,c:"hello"})},clickStronVoice(){},autoRotation(){const t={id:r["b"],status:this.autoRotationStatus?"off":"on"};Object(s["autoRotation"])(t).then(t=>{this.autoRotationStatus=!this.autoRotationStatus})},getMusicList(){console.log("click get music list"),getMusicList({}).then(t=>{console.log(t.data.musics),this.$message.success(t.data.musics[1])})}}},l=d,p=(i("8d3e"),i("2877")),u=Object(p["a"])(l,o,n,!1,null,null,null);e["default"]=u.exports},"5ccb":function(t,e,i){},"7ed4":function(t,e,i){"use strict";var o=i("2b0e");const n=new o["default"];e["a"]=n},"8d3e":function(t,e,i){"use strict";i("5ccb")},caaf:function(t,e,i){!function(e,i){t.exports=i()}(window,(function(){return function(t){var e={};function i(o){if(e[o])return e[o].exports;var n=e[o]={i:o,l:!1,exports:{}};return t[o].call(n.exports,n,n.exports,i),n.l=!0,n.exports}return i.m=t,i.c=e,i.d=function(t,e,o){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:o})},i.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var o=Object.create(null);if(i.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)i.d(o,n,function(e){return t[e]}.bind(null,n));return o},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="",i(i.s=0)}([function(t,e,i){"use strict";i.r(e);var o,n=function(t,e){var i=e.x-t.x,o=e.y-t.y;return Math.sqrt(i*i+o*o)},s=function(t){return t*(Math.PI/180)},r=function(t){return t*(180/Math.PI)},a=function(t,e,i){for(var o,n=e.split(/[ ,]+/g),s=0;s<n.length;s+=1)o=n[s],t.addEventListener?t.addEventListener(o,i,!1):t.attachEvent&&t.attachEvent(o,i)},c=function(t,e,i){for(var o,n=e.split(/[ ,]+/g),s=0;s<n.length;s+=1)o=n[s],t.removeEventListener?t.removeEventListener(o,i):t.detachEvent&&t.detachEvent(o,i)},d=function(t){return t.preventDefault(),t.type.match(/^touch/)?t.changedTouches:t},l=function(){return{x:void 0!==window.pageXOffset?window.pageXOffset:(document.documentElement||document.body.parentNode||document.body).scrollLeft,y:void 0!==window.pageYOffset?window.pageYOffset:(document.documentElement||document.body.parentNode||document.body).scrollTop}},p=function(t,e){e.top||e.right||e.bottom||e.left?(t.style.top=e.top,t.style.right=e.right,t.style.bottom=e.bottom,t.style.left=e.left):(t.style.left=e.x+"px",t.style.top=e.y+"px")},u=function(t,e,i){var o=h(t);for(var n in o)if(o.hasOwnProperty(n))if("string"==typeof e)o[n]=e+" "+i;else{for(var s="",r=0,a=e.length;r<a;r+=1)s+=e[r]+" "+i+", ";o[n]=s.slice(0,-2)}return o},h=function(t){var e={};return e[t]="",["webkit","Moz","o"].forEach((function(i){e[i+t.charAt(0).toUpperCase()+t.slice(1)]=""})),e},f=function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);return t},m=function(t,e){if(t.length)for(var i=0,o=t.length;i<o;i+=1)e(t[i]);else e(t)},y=!!("ontouchstart"in window),g=!!window.PointerEvent,v=!!window.MSPointerEvent,b={start:"mousedown",move:"mousemove",end:"mouseup"},x={};function O(){}g?o={start:"pointerdown",move:"pointermove",end:"pointerup, pointercancel"}:v?o={start:"MSPointerDown",move:"MSPointerMove",end:"MSPointerUp"}:y?(o={start:"touchstart",move:"touchmove",end:"touchend, touchcancel"},x=b):o=b,O.prototype.on=function(t,e){var i,o=t.split(/[ ,]+/g);this._handlers_=this._handlers_||{};for(var n=0;n<o.length;n+=1)i=o[n],this._handlers_[i]=this._handlers_[i]||[],this._handlers_[i].push(e);return this},O.prototype.off=function(t,e){return this._handlers_=this._handlers_||{},void 0===t?this._handlers_={}:void 0===e?this._handlers_[t]=null:this._handlers_[t]&&this._handlers_[t].indexOf(e)>=0&&this._handlers_[t].splice(this._handlers_[t].indexOf(e),1),this},O.prototype.trigger=function(t,e){var i,o=this,n=t.split(/[ ,]+/g);o._handlers_=o._handlers_||{};for(var s=0;s<n.length;s+=1)i=n[s],o._handlers_[i]&&o._handlers_[i].length&&o._handlers_[i].forEach((function(t){t.call(o,{type:i,target:o},e)}))},O.prototype.config=function(t){this.options=this.defaults||{},t&&(this.options=function(t,e){var i={};for(var o in t)t.hasOwnProperty(o)&&e.hasOwnProperty(o)?i[o]=e[o]:t.hasOwnProperty(o)&&(i[o]=t[o]);return i}(this.options,t))},O.prototype.bindEvt=function(t,e){var i=this;return i._domHandlers_=i._domHandlers_||{},i._domHandlers_[e]=function(){"function"==typeof i["on"+e]?i["on"+e].apply(i,arguments):console.warn('[WARNING] : Missing "on'+e+'" handler.')},a(t,o[e],i._domHandlers_[e]),x[e]&&a(t,x[e],i._domHandlers_[e]),i},O.prototype.unbindEvt=function(t,e){return this._domHandlers_=this._domHandlers_||{},c(t,o[e],this._domHandlers_[e]),x[e]&&c(t,x[e],this._domHandlers_[e]),delete this._domHandlers_[e],this};var k=O;function w(t,e){return this.identifier=e.identifier,this.position=e.position,this.frontPosition=e.frontPosition,this.collection=t,this.defaults={size:100,threshold:.1,color:"white",fadeTime:250,dataOnly:!1,restJoystick:!0,restOpacity:.5,mode:"dynamic",zone:document.body,lockX:!1,lockY:!1,shape:"circle"},this.config(e),"dynamic"===this.options.mode&&(this.options.restOpacity=0),this.id=w.id,w.id+=1,this.buildEl().stylize(),this.instance={el:this.ui.el,on:this.on.bind(this),off:this.off.bind(this),show:this.show.bind(this),hide:this.hide.bind(this),add:this.addToDom.bind(this),remove:this.removeFromDom.bind(this),destroy:this.destroy.bind(this),setPosition:this.setPosition.bind(this),resetDirection:this.resetDirection.bind(this),computeDirection:this.computeDirection.bind(this),trigger:this.trigger.bind(this),position:this.position,frontPosition:this.frontPosition,ui:this.ui,identifier:this.identifier,id:this.id,options:this.options},this.instance}w.prototype=new k,w.constructor=w,w.id=0,w.prototype.buildEl=function(t){return this.ui={},this.options.dataOnly||(this.ui.el=document.createElement("div"),this.ui.back=document.createElement("div"),this.ui.front=document.createElement("div"),this.ui.el.className="nipple collection_"+this.collection.id,this.ui.back.className="back",this.ui.front.className="front",this.ui.el.setAttribute("id","nipple_"+this.collection.id+"_"+this.id),this.ui.el.appendChild(this.ui.back),this.ui.el.appendChild(this.ui.front)),this},w.prototype.stylize=function(){if(this.options.dataOnly)return this;var t=this.options.fadeTime+"ms",e=function(t,e){var i=h(t);for(var o in i)i.hasOwnProperty(o)&&(i[o]=e);return i}("borderRadius","50%"),i=u("transition","opacity",t),o={};return o.el={position:"absolute",opacity:this.options.restOpacity,display:"block",zIndex:999},o.back={position:"absolute",display:"block",width:this.options.size+"px",height:this.options.size+"px",marginLeft:-this.options.size/2+"px",marginTop:-this.options.size/2+"px",background:this.options.color,opacity:".5"},o.front={width:this.options.size/2+"px",height:this.options.size/2+"px",position:"absolute",display:"block",marginLeft:-this.options.size/4+"px",marginTop:-this.options.size/4+"px",background:this.options.color,opacity:".5"},f(o.el,i),"circle"===this.options.shape&&f(o.back,e),f(o.front,e),this.applyStyles(o),this},w.prototype.applyStyles=function(t){for(var e in this.ui)if(this.ui.hasOwnProperty(e))for(var i in t[e])this.ui[e].style[i]=t[e][i];return this},w.prototype.addToDom=function(){return this.options.dataOnly||document.body.contains(this.ui.el)||this.options.zone.appendChild(this.ui.el),this},w.prototype.removeFromDom=function(){return this.options.dataOnly||!document.body.contains(this.ui.el)||this.options.zone.removeChild(this.ui.el),this},w.prototype.destroy=function(){clearTimeout(this.removeTimeout),clearTimeout(this.showTimeout),clearTimeout(this.restTimeout),this.trigger("destroyed",this.instance),this.removeFromDom(),this.off()},w.prototype.show=function(t){var e=this;return e.options.dataOnly||(clearTimeout(e.removeTimeout),clearTimeout(e.showTimeout),clearTimeout(e.restTimeout),e.addToDom(),e.restCallback(),setTimeout((function(){e.ui.el.style.opacity=1}),0),e.showTimeout=setTimeout((function(){e.trigger("shown",e.instance),"function"==typeof t&&t.call(this)}),e.options.fadeTime)),e},w.prototype.hide=function(t){var e=this;return e.options.dataOnly||(e.ui.el.style.opacity=e.options.restOpacity,clearTimeout(e.removeTimeout),clearTimeout(e.showTimeout),clearTimeout(e.restTimeout),e.removeTimeout=setTimeout((function(){var i="dynamic"===e.options.mode?"none":"block";e.ui.el.style.display=i,"function"==typeof t&&t.call(e),e.trigger("hidden",e.instance)}),e.options.fadeTime),e.options.restJoystick&&e.setPosition(t,{x:0,y:0})),e},w.prototype.setPosition=function(t,e){var i=this;i.frontPosition={x:e.x,y:e.y};var o=i.options.fadeTime+"ms",n={};n.front=u("transition",["top","left"],o);var s={front:{}};s.front={left:i.frontPosition.x+"px",top:i.frontPosition.y+"px"},i.applyStyles(n),i.applyStyles(s),i.restTimeout=setTimeout((function(){"function"==typeof t&&t.call(i),i.restCallback()}),i.options.fadeTime)},w.prototype.restCallback=function(){var t={};t.front=u("transition","none",""),this.applyStyles(t),this.trigger("rested",this.instance)},w.prototype.resetDirection=function(){this.direction={x:!1,y:!1,angle:!1}},w.prototype.computeDirection=function(t){var e,i,o,n=t.angle.radian,s=Math.PI/4,r=Math.PI/2;if(n>s&&n<3*s&&!t.lockX?e="up":n>-s&&n<=s&&!t.lockY?e="left":n>3*-s&&n<=-s&&!t.lockX?e="down":t.lockY||(e="right"),t.lockY||(i=n>-r&&n<r?"left":"right"),t.lockX||(o=n>0?"up":"down"),t.force>this.options.threshold){var a,c={};for(a in this.direction)this.direction.hasOwnProperty(a)&&(c[a]=this.direction[a]);var d={};for(a in this.direction={x:i,y:o,angle:e},t.direction=this.direction,c)c[a]===this.direction[a]&&(d[a]=!0);if(d.x&&d.y&&d.angle)return t;d.x&&d.y||this.trigger("plain",t),d.x||this.trigger("plain:"+i,t),d.y||this.trigger("plain:"+o,t),d.angle||this.trigger("dir dir:"+e,t)}else this.resetDirection();return t};var _=w;function T(t,e){return this.nipples=[],this.idles=[],this.actives=[],this.ids=[],this.pressureIntervals={},this.manager=t,this.id=T.id,T.id+=1,this.defaults={zone:document.body,multitouch:!1,maxNumberOfNipples:10,mode:"dynamic",position:{top:0,left:0},catchDistance:200,size:100,threshold:.1,color:"white",fadeTime:250,dataOnly:!1,restJoystick:!0,restOpacity:.5,lockX:!1,lockY:!1,shape:"circle",dynamicPage:!1},this.config(e),"static"!==this.options.mode&&"semi"!==this.options.mode||(this.options.multitouch=!1),this.options.multitouch||(this.options.maxNumberOfNipples=1),this.updateBox(),this.prepareNipples(),this.bindings(),this.begin(),this.nipples}T.prototype=new k,T.constructor=T,T.id=0,T.prototype.prepareNipples=function(){var t=this.nipples;t.on=this.on.bind(this),t.off=this.off.bind(this),t.options=this.options,t.destroy=this.destroy.bind(this),t.ids=this.ids,t.id=this.id,t.processOnMove=this.processOnMove.bind(this),t.processOnEnd=this.processOnEnd.bind(this),t.get=function(e){if(void 0===e)return t[0];for(var i=0,o=t.length;i<o;i+=1)if(t[i].identifier===e)return t[i];return!1}},T.prototype.bindings=function(){this.bindEvt(this.options.zone,"start"),this.options.zone.style.touchAction="none",this.options.zone.style.msTouchAction="none"},T.prototype.begin=function(){var t=this.options;if("static"===t.mode){var e=this.createNipple(t.position,this.manager.getIdentifier());e.add(),this.idles.push(e)}},T.prototype.createNipple=function(t,e){var i=l(),o={},n=this.options;if(t.x&&t.y)o={x:t.x-(i.x+this.box.left),y:t.y-(i.y+this.box.top)};else if(t.top||t.right||t.bottom||t.left){var s=document.createElement("DIV");s.style.display="hidden",s.style.top=t.top,s.style.right=t.right,s.style.bottom=t.bottom,s.style.left=t.left,s.style.position="absolute",n.zone.appendChild(s);var r=s.getBoundingClientRect();n.zone.removeChild(s),o=t,t={x:r.left+i.x,y:r.top+i.y}}var a=new _(this,{color:n.color,size:n.size,threshold:n.threshold,fadeTime:n.fadeTime,dataOnly:n.dataOnly,restJoystick:n.restJoystick,restOpacity:n.restOpacity,mode:n.mode,identifier:e,position:t,zone:n.zone,frontPosition:{x:0,y:0},shape:n.shape});return n.dataOnly||(p(a.ui.el,o),p(a.ui.front,a.frontPosition)),this.nipples.push(a),this.trigger("added "+a.identifier+":added",a),this.manager.trigger("added "+a.identifier+":added",a),this.bindNipple(a),a},T.prototype.updateBox=function(){this.box=this.options.zone.getBoundingClientRect()},T.prototype.bindNipple=function(t){var e,i=this,o=function(t,o){e=t.type+" "+o.id+":"+t.type,i.trigger(e,o)};t.on("destroyed",i.onDestroyed.bind(i)),t.on("shown hidden rested dir plain",o),t.on("dir:up dir:right dir:down dir:left",o),t.on("plain:up plain:right plain:down plain:left",o)},T.prototype.pressureFn=function(t,e,i){var o=this,n=0;clearInterval(o.pressureIntervals[i]),o.pressureIntervals[i]=setInterval(function(){var i=t.force||t.pressure||t.webkitForce||0;i!==n&&(e.trigger("pressure",i),o.trigger("pressure "+e.identifier+":pressure",i),n=i)}.bind(o),100)},T.prototype.onstart=function(t){var e=this,i=e.options,o=t;return t=d(t),e.updateBox(),m(t,(function(n){e.actives.length<i.maxNumberOfNipples?e.processOnStart(n):o.type.match(/^touch/)&&(Object.keys(e.manager.ids).forEach((function(i){if(Object.values(o.touches).findIndex((function(t){return t.identifier===i}))<0){var n=[t[0]];n.identifier=i,e.processOnEnd(n)}})),e.actives.length<i.maxNumberOfNipples&&e.processOnStart(n))})),e.manager.bindDocument(),!1},T.prototype.processOnStart=function(t){var e,i=this,o=i.options,s=i.manager.getIdentifier(t),r=t.force||t.pressure||t.webkitForce||0,a={x:t.pageX,y:t.pageY},c=i.getOrCreate(s,a);c.identifier!==s&&i.manager.removeIdentifier(c.identifier),c.identifier=s;var d=function(e){e.trigger("start",e),i.trigger("start "+e.id+":start",e),e.show(),r>0&&i.pressureFn(t,e,e.identifier),i.processOnMove(t)};if((e=i.idles.indexOf(c))>=0&&i.idles.splice(e,1),i.actives.push(c),i.ids.push(c.identifier),"semi"!==o.mode)d(c);else{if(!(n(a,c.position)<=o.catchDistance))return c.destroy(),void i.processOnStart(t);d(c)}return c},T.prototype.getOrCreate=function(t,e){var i,o=this.options;return/(semi|static)/.test(o.mode)?(i=this.idles[0])?(this.idles.splice(0,1),i):"semi"===o.mode?this.createNipple(e,t):(console.warn("Coudln't find the needed nipple."),!1):i=this.createNipple(e,t)},T.prototype.processOnMove=function(t){var e=this.options,i=this.manager.getIdentifier(t),o=this.nipples.get(i);if(function(t){return isNaN(t.buttons)?0!==t.pressure:0!==t.buttons}(t)){if(!o)return console.error("Found zombie joystick with ID "+i),void this.manager.removeIdentifier(i);if(e.dynamicPage){var a=l();d=o.el.getBoundingClientRect(),o.position={x:a.x+d.left,y:a.y+d.top}}o.identifier=i;var c=o.options.size/2,d={x:t.pageX,y:t.pageY};e.lockX&&(d.y=o.position.y),e.lockY&&(d.x=o.position.x);var u,h,f,m,y,g,v,b,x=n(d,o.position),O=(u=d,h=o.position,f=h.x-u.x,m=h.y-u.y,r(Math.atan2(m,f))),k=s(O),w=x/c,_={distance:x,position:d};"circle"===o.options.shape?(x=Math.min(x,c),y=o.position,g=x,b={x:0,y:0},v=s(v=O),b.x=y.x-g*Math.cos(v),b.y=y.y-g*Math.sin(v),d=b):(d=function(t,e,i){return{x:Math.min(Math.max(t.x,e.x-i),e.x+i),y:Math.min(Math.max(t.y,e.y-i),e.y+i)}}(d,o.position,c),x=n(d,o.position));var T=d.x-o.position.x,z=d.y-o.position.y;o.frontPosition={x:T,y:z},e.dataOnly||p(o.ui.front,o.frontPosition);var S={identifier:o.identifier,position:d,force:w,pressure:t.force||t.pressure||t.webkitForce||0,distance:x,angle:{radian:k,degree:O},vector:{x:T/c,y:-z/c},raw:_,instance:o,lockX:e.lockX,lockY:e.lockY};(S=o.computeDirection(S)).angle={radian:s(180-O),degree:180-O},o.trigger("move",S),this.trigger("move "+o.id+":move",S)}else this.processOnEnd(t)},T.prototype.processOnEnd=function(t){var e=this,i=e.options,o=e.manager.getIdentifier(t),n=e.nipples.get(o),s=e.manager.removeIdentifier(n.identifier);n&&(i.dataOnly||n.hide((function(){"dynamic"===i.mode&&(n.trigger("removed",n),e.trigger("removed "+n.id+":removed",n),e.manager.trigger("removed "+n.id+":removed",n),n.destroy())})),clearInterval(e.pressureIntervals[n.identifier]),n.resetDirection(),n.trigger("end",n),e.trigger("end "+n.id+":end",n),e.ids.indexOf(n.identifier)>=0&&e.ids.splice(e.ids.indexOf(n.identifier),1),e.actives.indexOf(n)>=0&&e.actives.splice(e.actives.indexOf(n),1),/(semi|static)/.test(i.mode)?e.idles.push(n):e.nipples.indexOf(n)>=0&&e.nipples.splice(e.nipples.indexOf(n),1),e.manager.unbindDocument(),/(semi|static)/.test(i.mode)&&(e.manager.ids[s.id]=s.identifier))},T.prototype.onDestroyed=function(t,e){this.nipples.indexOf(e)>=0&&this.nipples.splice(this.nipples.indexOf(e),1),this.actives.indexOf(e)>=0&&this.actives.splice(this.actives.indexOf(e),1),this.idles.indexOf(e)>=0&&this.idles.splice(this.idles.indexOf(e),1),this.ids.indexOf(e.identifier)>=0&&this.ids.splice(this.ids.indexOf(e.identifier),1),this.manager.removeIdentifier(e.identifier),this.manager.unbindDocument()},T.prototype.destroy=function(){for(var t in this.unbindEvt(this.options.zone,"start"),this.nipples.forEach((function(t){t.destroy()})),this.pressureIntervals)this.pressureIntervals.hasOwnProperty(t)&&clearInterval(this.pressureIntervals[t]);this.trigger("destroyed",this.nipples),this.manager.unbindDocument(),this.off()};var z=T;function S(t){var e,i=this;return i.ids={},i.index=0,i.collections=[],i.config(t),i.prepareCollections(),a(window,"resize",(function(t){clearTimeout(e),e=setTimeout((function(){var t,e=l();i.collections.forEach((function(i){i.forEach((function(i){t=i.el.getBoundingClientRect(),i.position={x:e.x+t.left,y:e.y+t.top}}))}))}),100)})),i.collections}S.prototype=new k,S.constructor=S,S.prototype.prepareCollections=function(){var t=this;t.collections.create=t.create.bind(t),t.collections.on=t.on.bind(t),t.collections.off=t.off.bind(t),t.collections.destroy=t.destroy.bind(t),t.collections.get=function(e){var i;return t.collections.every((function(t){return!(i=t.get(e))})),i}},S.prototype.create=function(t){return this.createCollection(t)},S.prototype.createCollection=function(t){var e=new z(this,t);return this.bindCollection(e),this.collections.push(e),e},S.prototype.bindCollection=function(t){var e,i=this,o=function(t,o){e=t.type+" "+o.id+":"+t.type,i.trigger(e,o)};t.on("destroyed",i.onDestroyed.bind(i)),t.on("shown hidden rested dir plain",o),t.on("dir:up dir:right dir:down dir:left",o),t.on("plain:up plain:right plain:down plain:left",o)},S.prototype.bindDocument=function(){this.binded||(this.bindEvt(document,"move").bindEvt(document,"end"),this.binded=!0)},S.prototype.unbindDocument=function(t){Object.keys(this.ids).length&&!0!==t||(this.unbindEvt(document,"move").unbindEvt(document,"end"),this.binded=!1)},S.prototype.getIdentifier=function(t){var e;return t?void 0===(e=void 0===t.identifier?t.pointerId:t.identifier)&&(e=this.latest||0):e=this.index,void 0===this.ids[e]&&(this.ids[e]=this.index,this.index+=1),this.latest=e,this.ids[e]},S.prototype.removeIdentifier=function(t){var e={};for(var i in this.ids)if(this.ids[i]===t){e.id=i,e.identifier=this.ids[i],delete this.ids[i];break}return e},S.prototype.onmove=function(t){return this.onAny("move",t),!1},S.prototype.onend=function(t){return this.onAny("end",t),!1},S.prototype.oncancel=function(t){return this.onAny("end",t),!1},S.prototype.onAny=function(t,e){var i,o=this,n="processOn"+t.charAt(0).toUpperCase()+t.slice(1);return e=d(e),m(e,(function(t){i=o.getIdentifier(t),m(o.collections,function(t,e,i){i.ids.indexOf(e)>=0&&(i[n](t),t._found_=!0)}.bind(null,t,i)),t._found_||o.removeIdentifier(i)})),!1},S.prototype.destroy=function(){this.unbindDocument(!0),this.ids={},this.index=0,this.collections.forEach((function(t){t.destroy()})),this.off()},S.prototype.onDestroyed=function(t,e){if(this.collections.indexOf(e)<0)return!1;this.collections.splice(this.collections.indexOf(e),1)};var E=new S;e.default={create:function(t){return E.create(t)},factory:E}}]).default}))},e477:function(t,e,i){"use strict";i.r(e),i.d(e,"requestLogin",(function(){return r})),i.d(e,"requestLogout",(function(){return a})),i.d(e,"switchFlashLight",(function(){return c})),i.d(e,"switchHeadLight",(function(){return d})),i.d(e,"getWebSockTicket",(function(){return l})),i.d(e,"move",(function(){return p})),i.d(e,"addPerson",(function(){return u})),i.d(e,"getFaceReporterChannel",(function(){return h})),i.d(e,"ptzMove",(function(){return f})),i.d(e,"autoRotation",(function(){return m})),i.d(e,"ptzHMove",(function(){return y})),i.d(e,"ptzVMove",(function(){return g})),i.d(e,"ptzResetPosition",(function(){return v})),i.d(e,"ptzZoom",(function(){return b})),i.d(e,"getAudioList",(function(){return x})),i.d(e,"uploadAudios",(function(){return O})),i.d(e,"deleteAudios",(function(){return k})),i.d(e,"playAudio",(function(){return w})),i.d(e,"stopAudio",(function(){return _})),i.d(e,"deleteMaps",(function(){return T}));var o=i("2b0e"),n=i("267e");const s=o["default"].prototype.$http,r=t=>s.get("/token?id="+t.username+"&secret="+t.password).then(t=>t),a=t=>s.delete("/token?id="+t.username+"&secret="+t.password).then(t=>t),c=t=>s.put("/robot/"+t.id+"/ctrl/flashlight?status="+t.status).then(t=>t),d=t=>s.put("/robot/"+t.id+"/ctrl/headlight?status="+t.status).then(t=>t),l=t=>s.get("/robot/"+t.id+"ticket").then(t=>t),p=t=>s.put("/robot/"+t.id+"/ctrl/move?linea ="+t.linear+"angular="+t.angular).then(t=>t),u=t=>s.put("/robot/"+t.id+"/ai/face/person",t).then(t=>t),h=t=>s.get("/robot/"+t.id+"/ai/face/ticket",t).then(t=>t),f=t=>s.put("/robot/"+t.id+"/ctrl/ptz/rotation?status="+t.status+"&direction="+t.direction+"&step="+t.step).then(t=>t),m=t=>s.put("/robot/"+t.id+"/ctrl/ptz/autoRotation?status="+t.status).then(t=>t),y=t=>s.put("/robot/"+t.id+"/ctrl/ptz/horizontal?angle="+t.angle).then(t=>t),g=t=>s.put("/robot/"+t.id+"/ctrl/ptz/vertical?angle="+t.angle).then(t=>t),v=t=>s.put("/robot/"+t.id+"/ctrl/ptz/reset").then(t=>t),b=t=>s.put("/robot/"+t.id+"/ctrl/ptz/zoom?angle="+t.angle).then(t=>t),x=t=>s.get(n["a"]+"/musics",{params:t}),O=t=>s.get(n["a"]+"/user/remove",{params:t}),k=t=>s.get(n["a"]+"/user/batchremove",{params:t}),w=t=>s.get(n["a"]+"/user/edit",{params:t}),_=t=>s.get(n["a"]+"/user/add",{params:t}),T=t=>s.delete("/robot/"+t.id+"/map",{params:t}).then(t=>t)}}]);